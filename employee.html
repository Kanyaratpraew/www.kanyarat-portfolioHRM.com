<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th,
        td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background-color: #f0f0f0;
        }
        
        button {
            margin: 2px;
            padding: 5px 10px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }
    </style>
</head>

<body>

    <section class="employee-filter" style="max-width: 600px; margin: auto;">
        <h2>üîç ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h2>
        <label for="department">‡πÅ‡∏ú‡∏ô‡∏Å:</label>
        <select id="department">
    <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
    <option value="‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô">‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</option>
    <option value="‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•">‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</option>
    <option value="‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®">‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</option>
  </select>

        <label for="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
        <select id="status">
    <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
    <option value="‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà">‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</option>
    <option value="‡∏•‡∏≤‡∏≠‡∏≠‡∏Å">‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</option>
  </select>

        <button onclick="filterEmployees()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </section>

    <section class="employee-list" style="max-width: 800px; margin: 30px auto; display: none;" id="employeeSection">
        <h2>üë• ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h2>
        <table>
            <thead>
                <tr>
                    <th>‡∏£‡∏´‡∏±‡∏™</th>
                    <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                    <th>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</th>
                    <th>‡πÅ‡∏ú‡∏ô‡∏Å</th>
                    <th>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                    <th>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
            </thead>
            <tbody id="employeeBody"></tbody>
        </table>
    </section>

    <!-- Modal ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
    <div id="detailModal" class="modal">
        <h3>üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h3>
        <div id="detailContent"></div>
        <button onclick="closeModal()">‡∏õ‡∏¥‡∏î</button>
    </div>

    <!-- Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
    <div id="editModal" class="modal">
        <h3>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h3>
        <form id="editForm" onsubmit="saveEdit(event)">
            <input type="hidden" id="editId" />
            <label>‡∏ä‡∏∑‡πà‡∏≠:</label><input type="text" id="editName" /><br />
            <label>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label><input type="text" id="editSurname" /><br />
            <label>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</label><input type="text" id="editPosition" /><br />
            <label>‡πÅ‡∏ú‡∏ô‡∏Å:</label><input type="text" id="editDepartment" /><br />
            <label>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label><input type="text" id="editSalary" /><br />
            <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label><input type="text" id="editStatus" /><br />
            <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:</label><input type="date" id="editStartDate" /><br /><br />
            <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            <button type="button" onclick="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </form>
    </div>

    <!-- ‡∏Å‡∏£‡∏≤‡∏ü -->
    <section style="margin: 50px auto; max-width: 800px;">
        <div style="background-color: #e0f7fa; padding: 20px; border-radius: 8px;">
            <h2>üìä ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏Å</h2>
            <canvas id="employeeChart" width="400" height="200"></canvas>
        </div>
    </section>

    <script>
        const employees = [{
            id: "001",
            name: "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
            surname: "‡πÉ‡∏à‡∏î‡∏µ",
            position: "‡∏ö‡∏±‡∏ç‡∏ä‡∏µ",
            department: "‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô",
            salary: "30,000",
            status: "‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà",
            startDate: "2022-01-10"
        }, {
            id: "002",
            name: "‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á",
            surname: "‡∏™‡∏∏‡∏Ç‡πÉ‡∏à",
            position: "‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•",
            department: "‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•",
            salary: "40,000",
            status: "‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà",
            startDate: "2021-05-01"
        }, {
            id: "003",
            name: "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
            surname: "‡πÄ‡∏Å‡πà‡∏á‡∏î‡∏µ",
            position: "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®",
            department: "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®",
            salary: "50,000",
            status: "‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà",
            startDate: "2023-03-15"
        }];

        function filterEmployees() {
            const dept = document.getElementById("department").value;
            const status = document.getElementById("status").value;
            const tbody = document.getElementById("employeeBody");
            const section = document.getElementById("employeeSection");

            const filtered = employees.filter(emp =>
                (dept === "" || emp.department === dept) &&
                (status === "" || emp.status === status)
            );

            tbody.innerHTML = "";
            if (filtered.length === 0) {
                tbody.innerHTML = `<tr><td colspan="7" style="color:red;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</td></tr>`;
            } else {
                filtered.forEach(emp => {
                    tbody.innerHTML += `
        <tr>
          <td>${emp.id}</td>
          <td>${emp.name} ${emp.surname}</td>
          <td>${emp.position}</td>
          <td>${emp.department}</td>
          <td>${emp.salary}</td>
          <td>${emp.status}</td>
          <td>
            <button onclick="showDetails('${emp.id}')">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
            <button onclick="editEmployee('${emp.id}')">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
          </td>
        </tr>
      `;
                });
            }

            section.style.display = "block";
        }

        function showDetails(id) {
            const emp = employees.find(e => e.id === id);
            document.getElementById("detailContent").innerHTML = `
    <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${emp.name}</p>
    <p><strong>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong> ${emp.surname}</p>
    <p><strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ${emp.position}</p>
    <p><strong>‡πÅ‡∏ú‡∏ô‡∏Å:</strong> ${emp.department}</p>
    <p><strong>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</strong> ${emp.salary} ‡∏ö‡∏≤‡∏ó</p>
    <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ${emp.status}</p>
    <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:</strong> ${emp.startDate}</p>
  `;
            document.getElementById("detailModal").style.display = "block";
        }

        function editEmployee(id) {
            const emp = employees.find(e => e.id === id);
            document.getElementById("editId").value = emp.id;
            document.getElementById("editName").value = emp.name;
            document.getElementById("editSurname").value = emp.surname;
            document.getElementById("editPosition").value = emp.position;
            document.getElementById("editDepartment").value = emp.department;
            document.getElementById("editSalary").value = emp.salary;
            document.getElementById("editStatus").value = emp.status;
            document.getElementById("editStartDate").value = emp.startDate;
            document.getElementById("editModal").style.display = "block";
        }

        function saveEdit(event) {
            event.preventDefault();
            const id = document.getElementById("editId").value;
            const emp = employees.find(e => e.id === id);
            emp.name = document.getElementById("editName").value;
            emp.surname = document.getElementById("editSurname").value;
            emp.position = document.getElementById("editPosition").value;
            emp.department = document.getElementById("editDepartment").value;
            emp.salary = document.getElementById("editSalary").value;
            emp.status = document.getElementById("editStatus").value;
            emp.startDate = document.getElementById("editStartDate").value;
            closeModal();
            filterEmployees();
        }

        function closeModal() {
            document.getElementById("detailModal").style.display = "none";
            document.getElementById("editModal").style.display = "none";
        }

        function renderChart() {
            const ctx = document.getElementById('employeeChart').getContext('2d');
            const deptCounts = employees.reduce((acc, emp) => {
                acc[emp.department] = (acc[emp.department] || 0) + 1;
                return acc;
            }, {});

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(deptCounts),
                    datasets: [{
                        label: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô',
                        data: Object.values(deptCounts),
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        renderChart();
    </script>
</body>

</html>